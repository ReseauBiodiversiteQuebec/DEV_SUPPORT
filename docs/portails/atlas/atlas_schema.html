<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Structure – Support technique</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-29e2c20b02301cfff04dc8050bf30c7e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark-43df0d6f53b733b42d37fa7808e17715.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-eaae3773edbe84ed77ea85018a3d2c28.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-6fbf2ccbc5865dc5fcf19631084d01e6.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://code.jquery.com/jquery-3.7.1.js" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/md5.js"></script><script src="../../../js-pass.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../assets/img/logo3.png" alt="BQ logo" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Accueil</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../docs/portails/portails_intro.html" aria-current="page"> 
<span class="menu-text">Portails</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/packages/packages_intro.html"> 
<span class="menu-text">Packages</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/catalogues/catalogues_intro.html"> 
<span class="menu-text">Catalogues</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/serveurs/serveurs_intro.html"> 
<span class="menu-text">Serveurs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/tableaux_bord/tableaux_bord_intro.html"> 
<span class="menu-text">Tableaux de bord</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/recherche/recherche_intro.html"> 
<span class="menu-text">Recherche</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/design/design_intro.html"> 
<span class="menu-text">Design</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">À propos</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/BiodiversiteQuebec" title="dev_support GitHub" class="quarto-navigation-tool px-1" aria-label="dev_support GitHub"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../docs/portails/atlas/atlas_intro.html">Atlas</a></li><li class="breadcrumb-item"><a href="../../../docs/portails/atlas/atlas_schema.html">Structure</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/portails_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Portails</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Coleo</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/coleo/coleo_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Base de données Coleo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/coleo/coleo_structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/coleo/coleo_taxonomie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Taxonomie</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/coleo/coleo_API_endpoints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Endpoints &amp; CRON jobs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/coleo/coleo_infrastructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Infrastructure Coleo (Staging et Production)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Atlas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/atlas/atlas_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Base de données Atlas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/atlas/atlas_description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Description schéma public</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/atlas/atlas_schema.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/atlas/atlas_datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Jeu de données Atlas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/atlas/atlas_geoparquet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Connexion à distance au fichier GeoParquet.</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/atlas/atlas_injection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Injection Atlas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/atlas/atlas_infrastructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Infrastructure Atlas (Staging et Production)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Indicateurs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/indicateurs/indicateurs_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Indicateurs</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Strapi</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/strapi/article.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create Articles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/strapi/media.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Media files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/strapi/webhooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Webhooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/strapi/from_staging_to_production.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Staging vers Production</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Create user accounts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/create_users/login.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Connexion au portail web de Biodiversité Québec</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/create_users/sign_up.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Créer un nouvel utilisateur</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/portails/create_users/change_password.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Changer le mot de passe d’utilisateur</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#table-observations" id="toc-table-observations" class="nav-link active" data-scroll-target="#table-observations">Table: Observations</a>
  <ul class="collapse">
  <li><a href="#description" id="toc-description" class="nav-link" data-scroll-target="#description">Description</a></li>
  <li><a href="#dependencies" id="toc-dependencies" class="nav-link" data-scroll-target="#dependencies">Dependencies</a></li>
  <li><a href="#columns" id="toc-columns" class="nav-link" data-scroll-target="#columns">Columns</a></li>
  <li><a href="#additional-constraints" id="toc-additional-constraints" class="nav-link" data-scroll-target="#additional-constraints">Additional Constraints</a></li>
  <li><a href="#indexes" id="toc-indexes" class="nav-link" data-scroll-target="#indexes">Indexes</a></li>
  <li><a href="#triggers" id="toc-triggers" class="nav-link" data-scroll-target="#triggers">Triggers</a></li>
  <li><a href="#rationale" id="toc-rationale" class="nav-link" data-scroll-target="#rationale">Rationale</a></li>
  </ul></li>
  <li><a href="#table-datasets" id="toc-table-datasets" class="nav-link" data-scroll-target="#table-datasets">Table: Datasets</a>
  <ul class="collapse">
  <li><a href="#description-1" id="toc-description-1" class="nav-link" data-scroll-target="#description-1">Description</a></li>
  <li><a href="#dependencies-1" id="toc-dependencies-1" class="nav-link" data-scroll-target="#dependencies-1">Dependencies</a></li>
  <li><a href="#columns-1" id="toc-columns-1" class="nav-link" data-scroll-target="#columns-1">Columns</a></li>
  </ul></li>
  <li><a href="#table-taxa_obs" id="toc-table-taxa_obs" class="nav-link" data-scroll-target="#table-taxa_obs">Table: Taxa_Obs</a>
  <ul class="collapse">
  <li><a href="#description-2" id="toc-description-2" class="nav-link" data-scroll-target="#description-2">Description</a></li>
  <li><a href="#dependencies-2" id="toc-dependencies-2" class="nav-link" data-scroll-target="#dependencies-2">Dependencies</a></li>
  <li><a href="#columns-2" id="toc-columns-2" class="nav-link" data-scroll-target="#columns-2">Columns</a></li>
  <li><a href="#additional-constraints-1" id="toc-additional-constraints-1" class="nav-link" data-scroll-target="#additional-constraints-1">Additional Constraints</a></li>
  <li><a href="#indexes-1" id="toc-indexes-1" class="nav-link" data-scroll-target="#indexes-1">Indexes</a></li>
  <li><a href="#triggers-1" id="toc-triggers-1" class="nav-link" data-scroll-target="#triggers-1">Triggers</a></li>
  <li><a href="#conflicts-and-parent-taxa" id="toc-conflicts-and-parent-taxa" class="nav-link" data-scroll-target="#conflicts-and-parent-taxa">Conflicts and Parent Taxa</a></li>
  </ul></li>
  <li><a href="#table-variables" id="toc-table-variables" class="nav-link" data-scroll-target="#table-variables">Table: Variables</a>
  <ul class="collapse">
  <li><a href="#description-3" id="toc-description-3" class="nav-link" data-scroll-target="#description-3">Description</a></li>
  <li><a href="#dependencies-3" id="toc-dependencies-3" class="nav-link" data-scroll-target="#dependencies-3">Dependencies</a></li>
  <li><a href="#columns-3" id="toc-columns-3" class="nav-link" data-scroll-target="#columns-3">Columns</a></li>
  <li><a href="#additional-constraints-2" id="toc-additional-constraints-2" class="nav-link" data-scroll-target="#additional-constraints-2">Additional Constraints</a></li>
  </ul></li>
  <li><a href="#table-efforts" id="toc-table-efforts" class="nav-link" data-scroll-target="#table-efforts">Table: Efforts</a>
  <ul class="collapse">
  <li><a href="#description-4" id="toc-description-4" class="nav-link" data-scroll-target="#description-4">Description</a></li>
  <li><a href="#dependencies-4" id="toc-dependencies-4" class="nav-link" data-scroll-target="#dependencies-4">Dependencies</a></li>
  <li><a href="#columns-4" id="toc-columns-4" class="nav-link" data-scroll-target="#columns-4">Columns</a></li>
  <li><a href="#additional-constraints-3" id="toc-additional-constraints-3" class="nav-link" data-scroll-target="#additional-constraints-3">Additional Constraints</a></li>
  <li><a href="#foreign-key-constraints" id="toc-foreign-key-constraints" class="nav-link" data-scroll-target="#foreign-key-constraints">Foreign Key Constraints</a></li>
  </ul></li>
  <li><a href="#table-obs_efforts" id="toc-table-obs_efforts" class="nav-link" data-scroll-target="#table-obs_efforts">Table: Obs_Efforts</a>
  <ul class="collapse">
  <li><a href="#description-5" id="toc-description-5" class="nav-link" data-scroll-target="#description-5">Description</a></li>
  <li><a href="#dependencies-5" id="toc-dependencies-5" class="nav-link" data-scroll-target="#dependencies-5">Dependencies</a></li>
  <li><a href="#columns-5" id="toc-columns-5" class="nav-link" data-scroll-target="#columns-5">Columns</a></li>
  <li><a href="#additional-constraints-4" id="toc-additional-constraints-4" class="nav-link" data-scroll-target="#additional-constraints-4">Additional Constraints</a></li>
  <li><a href="#foreign-key-constraints-1" id="toc-foreign-key-constraints-1" class="nav-link" data-scroll-target="#foreign-key-constraints-1">Foreign Key Constraints</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../docs/portails/atlas/atlas_intro.html">Atlas</a></li><li class="breadcrumb-item"><a href="../../../docs/portails/atlas/atlas_schema.html">Structure</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Structure</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- Section observations -->
<section id="table-observations" class="level2">
<h2 class="anchored" data-anchor-id="table-observations">Table: Observations</h2>
<section id="description" class="level3">
<h3 class="anchored" data-anchor-id="description">Description</h3>
<p>The <code>observations</code> table is central in the Atlas database to recording ecological observations. It is is designed to support different observation types, such as abundances, occurrences, and presence/absence data of various units. The type of observation is specified by the <code>id_variables</code> column, which references the <code>variables</code> table. See the <code>variables</code> table documentation for more details.</p>
<p>It encompasses a wide range of data including geographical coordinates, observation times, taxa details, and associated variables, relying on foreign keys to other tables to store this information. See the <code>Dependencies</code> section below for more details and relevant tables documentation.</p>
<p>Partitions are used to store observations that are within or outside of Quebec. This allows for faster queries on observations that are within Quebec, which are the most commonly used. See the <code>partitions</code> section below for more details.</p>
<p>Triggers are used to automatically update the <code>within_quebec</code>, <code>modified_at</code>, <code>dwc_event_date</code> columns on insert or update. See the <code>triggers</code> section below for more details.</p>
</section>
<section id="dependencies" class="level3">
<h3 class="anchored" data-anchor-id="dependencies">Dependencies</h3>
<ul>
<li>Foreign Keys:
<ul>
<li><code>id_datasets</code> references <code>public.datasets (id)</code></li>
<li><code>id_taxa_obs</code> references <code>public.taxa_obs (id)</code></li>
<li><code>id_variables</code> references <code>public.variables (id)</code></li>
</ul></li>
<li>Partitions:
<ul>
<li><code>observations_partitions.outside_quebec</code></li>
<li><code>observations_partitions.within_quebec</code></li>
</ul></li>
<li>Sequence: <code>observations_partitions.observations_id_seq</code></li>
</ul>
</section>
<section id="columns" class="level3">
<h3 class="anchored" data-anchor-id="columns">Columns</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 17%">
<col style="width: 36%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Column Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
<th><strong>Constraints</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>id</strong></td>
<td>Bigint</td>
<td>A unique identifier for each observation.</td>
<td>Primary key (part of), Not Null, Default: nextval(‘observations_partitions.observations_id_seq’::regclass)</td>
</tr>
<tr class="even">
<td><strong>org_parent_event</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. Identifier of the parent event in the original source.</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>org_event</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. Identifier of the event in the original source.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>org_id_obs</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. Original identifier of the observation in the original source.</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>id_datasets</strong></td>
<td>Integer</td>
<td>The identifier of the dataset to which the observation belongs.</td>
<td>Not Null, Foreign key</td>
</tr>
<tr class="even">
<td><strong>id_taxa_obs</strong></td>
<td>Integer</td>
<td>Identifier for the observed taxon.</td>
<td>Not Null, Foreign key</td>
</tr>
<tr class="odd">
<td><strong>geom</strong></td>
<td>Geometry(Point, 4326)</td>
<td>The geometry of the coordinates of the observation.</td>
<td>Not Null</td>
</tr>
<tr class="even">
<td><strong>year_obs</strong></td>
<td>Integer</td>
<td>The year of the observation.</td>
<td>Not Null</td>
</tr>
<tr class="odd">
<td><strong>month_obs</strong></td>
<td>Integer</td>
<td>The month of the observation.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>day_obs</strong></td>
<td>Integer</td>
<td>The day of the observation.</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>time_obs</strong></td>
<td>Time</td>
<td>The time of the observation.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>id_variables</strong></td>
<td>Integer</td>
<td>The identifier of the variable observed. Whether of type <code>abundance</code>, <code>occurrence</code>, etc. is stored in table <code>variables</code></td>
<td>Not Null, Foreign key</td>
</tr>
<tr class="odd">
<td><strong>obs_value</strong></td>
<td>Numeric</td>
<td>The observed value for the variable. Might be integer or float in the case of abundance, or 0 or 1 in case of presence/absence</td>
<td>Not Null</td>
</tr>
<tr class="even">
<td><strong>id_taxa (deprecated)</strong></td>
<td>Integer</td>
<td><em>Deprecated</em>. The identifier of the taxa observed. From <code>taxa</code> table. Only to maintain compatibility.</td>
<td>Foreign key</td>
</tr>
<tr class="odd">
<td><strong>issue</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. Any issues or remarks related to the observation.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>created_by</strong></td>
<td>Character Varying</td>
<td><em>Auto on insert</em>. The user who inserted the observation record within Atlas DB.</td>
<td>Default: CURRENT_USER</td>
</tr>
<tr class="odd">
<td><strong>modified_at</strong></td>
<td>Timestamp with time zone</td>
<td><em>Auto on insert/update</em>. The timestamp when the observation was last modified.</td>
<td>Not Null, Default: CURRENT_TIMESTAMP</td>
</tr>
<tr class="even">
<td><strong>modified_by</strong></td>
<td>Character Varying</td>
<td><em>Auto on insert/update</em>. The user who last modified the observation within Atlas DB.</td>
<td>Default: CURRENT_USER</td>
</tr>
<tr class="odd">
<td><strong>within_quebec</strong></td>
<td>Boolean</td>
<td><em>Auto on insert/update</em>. Indicates whether the observation was within Quebec.</td>
<td>Part of primary key, Not Null, Default: false</td>
</tr>
<tr class="even">
<td><strong>dwc_event_date</strong></td>
<td>Text</td>
<td><em>Auto on insert/update</em>. The Darwin Core (DwC) formatted event date of the observation.</td>
<td>Not Null, Default: ’’ (empty string)</td>
</tr>
</tbody>
</table>
</section>
<section id="additional-constraints" class="level3">
<h3 class="anchored" data-anchor-id="additional-constraints">Additional Constraints</h3>
<ul>
<li><strong>Primary Key Constraint</strong>: The combination of <code>id</code> and <code>within_quebec</code> serves as a unique identifier for each observation record.</li>
<li><strong>Foreign Key Constraints</strong>: Links to <code>datasets</code> and <code>taxa_obs</code> tables ensure referential integrity.</li>
<li><strong>Unique Constraint</strong>: The combination of <code>geom</code>, <code>dwc_event_date</code>, <code>id_taxa_obs</code>, <code>obs_value</code>, <code>id_variables</code>, <code>within_quebec</code> ensures that each observation is uniquely identifiable and retrievable. This is used to prevent duplicates using the index <code>observations_unique_rows</code>.</li>
</ul>
</section>
<section id="indexes" class="level3">
<h3 class="anchored" data-anchor-id="indexes">Indexes</h3>
<ul>
<li><code>dwc_event_date_idx</code> on <code>dwc_event_date</code></li>
<li><code>observations_geom_date_time_idx</code> on <code>geom</code>, <code>year_obs</code>, <code>month_obs</code>, <code>day_obs</code>, <code>time_obs</code></li>
<li><code>observations_geom_idx</code> on <code>geom</code></li>
<li><code>observations_id_datasets_id_taxa_idx</code> on <code>id_datasets</code>, <code>id_taxa</code></li>
<li><code>observations_id_datasets_idx</code> on <code>id_datasets</code></li>
<li><code>observations_id_idx</code> on <code>id</code></li>
<li><code>observations_id_taxa_obs_dwc_event_date_geom_idx</code> on <code>id_taxa_obs</code>, <code>dwc_event_date</code>, <code>geom</code></li>
<li><code>observations_id_taxa_obs_idx</code> on <code>id_taxa_obs</code></li>
<li><code>observations_unique_rows</code> on <code>geom</code>, <code>dwc_event_date</code>, <code>id_taxa_obs</code>, <code>obs_value</code>, <code>id_variables</code>, <code>within_quebec</code></li>
<li><code>observations_year_obs_idx</code> on <code>year_obs</code></li>
<li>Specific indexes on partitions (<code>within_quebec_year_obs_idx</code>, <code>observations_id_taxa_obs_idx</code> in <code>observations_partitions.within_quebec</code>)</li>
</ul>
</section>
<section id="triggers" class="level3">
<h3 class="anchored" data-anchor-id="triggers">Triggers</h3>
<ul>
<li><code>set_dwc_event_date_trggr</code>: Before insert, sets the DwC event date.</li>
<li><code>update_modified_at</code>: Before update, updates the <code>modified_at</code> timestamp.</li>
<li><code>action_user_logger</code>: In partition <code>observations_partitions.outside_quebec</code>, logs user actions before insert or update.</li>
</ul>
</section>
<section id="rationale" class="level3">
<h3 class="anchored" data-anchor-id="rationale">Rationale</h3>
<section id="use-of-partitions-for-performance" class="level4">
<h4 class="anchored" data-anchor-id="use-of-partitions-for-performance">Use of Partitions for Performance</h4>
<p>The use of table partitions in the observations table, particularly with the within_quebec column, is a strategic decision aimed at enhancing database performance. Partitioning is a highly effective method for managing large tables by splitting them into smaller, more manageable pieces. In this case, the observations_partitions schema segregates observation data into distinct partitions based on whether the observations occurred within Quebec (within_quebec = true) or outside it (within_quebec = false). This approach significantly improves query performance by allowing the database engine to quickly locate and retrieve data from a smaller subset of the table. Additionally, it simplifies maintenance tasks such as backups and data purges, as operations can be performed on individual partitions without affecting the entire dataset.</p>
<p>Partition tables <code>observations_partitions.within_quebec</code> and <code>observations_partitions.outside_quebec</code> are created within the <code>observations_partitions</code> schema.</p>
</section>
<section id="temporal-columns" class="level4">
<h4 class="anchored" data-anchor-id="temporal-columns">Temporal Columns</h4>
<p>The inclusion of year_obs, month_obs, day_obs, and time_obs columns in the observations table is intentionally designed to accommodate observations with varying levels of temporal resolution. This flexibility is crucial in ecological data collection, where the exact time of an observation may range from a specific moment to a broader time frame. By breaking down the observation timestamp into separate components, the database can store and process data that is only accurate to a certain level (e.g., year, month, day, or time). This structure not only caters to the diverse nature of ecological observations but also enhances the ability to perform time-based queries and analyses with varying granularities.</p>
</section>
<section id="duplicates-and-dwc-event-date" class="level4">
<h4 class="anchored" data-anchor-id="duplicates-and-dwc-event-date">Duplicates and DwC Event Date</h4>
<p>Duplicates are possible through the process of adding data from various sources, such as GBIF and eBird. Duplicates are limited through the use of a unique constraint on the combination of <code>geom</code>, <code>dwc_event_date</code>, <code>id_taxa_obs</code>, <code>obs_value</code>, <code>id_variables</code>, <code>within_quebec</code>.</p>
<p>The <code>dwc_event_date</code> column values are generated automatically using a trigger function. It is a formatted string that reflects a standardized approach to recording event dates in biodiversity data. The use of this column is required to ensure each observation is distinctly identifiable and retrievable. It also facilitates data interoperability, making it easier to share and compare ecological data across different platforms and studies.</p>
<!-- Section datasets -->
</section>
</section>
</section>
<section id="table-datasets" class="level2">
<h2 class="anchored" data-anchor-id="table-datasets">Table: Datasets</h2>
<section id="description-1" class="level3">
<h3 class="anchored" data-anchor-id="description-1">Description</h3>
<p>The datasets table stores comprehensive metadata about ecological observation datasets. This includes information about the source, creator, type of data, and publication details. It serves as a central repository for tracking various datasets related to ecological observations.</p>
</section>
<section id="dependencies-1" class="level3">
<h3 class="anchored" data-anchor-id="dependencies-1">Dependencies</h3>
<p><em>None</em></p>
</section>
<section id="columns-1" class="level3">
<h3 class="anchored" data-anchor-id="columns-1">Columns</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 15%">
<col style="width: 59%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Column Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
<th><strong>Constraints</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>id</strong></td>
<td>Integer</td>
<td>A unique identifier for each dataset.</td>
<td>Primary key, Not Null</td>
</tr>
<tr class="even">
<td><strong>original_source</strong></td>
<td>Character Varying</td>
<td>The original source of the dataset. Where was it obtained from (e.g., ‘GBIF’, ‘eBird’, ‘MELCCFP’).</td>
<td>Not Null</td>
</tr>
<tr class="odd">
<td><strong>org_dataset_id</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. An identifier used by the <code>original_source</code> or <code>publisher</code> for the dataset.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>creator</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. The creator of the dataset (e.g., individual researcher or institution).</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>title</strong></td>
<td>Character Varying</td>
<td>The title of the dataset.</td>
<td>Not Null</td>
</tr>
<tr class="even">
<td><strong>publisher</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. The publisher of the dataset (e.g., ‘Nature Publishing Group’, ‘Elsevier’, ‘GBIF’, ‘Données Québec’).</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>modified</strong></td>
<td>Date</td>
<td>The date when the dataset was last modified.</td>
<td>Not Null</td>
</tr>
<tr class="even">
<td><strong>keywords</strong></td>
<td>Character Varying[]</td>
<td><em>Optional</em>. An array of keywords associated with the dataset.</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>abstract</strong></td>
<td>Text</td>
<td><em>Optional</em>. A brief abstract or summary of the dataset.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>type_sampling</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. The type of sampling method used in the dataset.</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>type_obs</strong></td>
<td>public.type_observation</td>
<td><em>Optional</em>. The type of observation (Enum values: ‘living specimen’, ‘preserved specimen’, ‘fossil specimen’, ‘human observation’, ‘machine observation’, ‘literature’, ‘material sample’, ‘others’).</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>intellectual_rights</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. Information about the intellectual rights of the dataset.</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>license</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. The license under which the dataset is released (e.g., ‘CC BY 4.0’, ‘GPL’, ‘Entente de partage’).</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>owner</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. The owner of the dataset (e.g., a university, research institution, or individual researcher).</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>methods</strong></td>
<td>Text</td>
<td><em>Optional</em>. A detailed description of the methods used in the dataset.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>open_data</strong></td>
<td>Boolean</td>
<td>A boolean indicating whether the dataset is open data.</td>
<td>Not Null</td>
</tr>
<tr class="odd">
<td><strong>exhaustive</strong></td>
<td>Boolean</td>
<td>A boolean indicating whether the dataset is exhaustive, meaning obtained from a checklist survey.</td>
<td>Not Null</td>
</tr>
<tr class="even">
<td><strong>direct_obs</strong></td>
<td>Boolean</td>
<td>A boolean indicating whether the dataset contains direct observations.</td>
<td>Not Null</td>
</tr>
<tr class="odd">
<td><strong>centroid</strong></td>
<td>Boolean</td>
<td><em>Optional</em>. A boolean indicating whether the dataset contains centroid data.</td>
<td>Default: False</td>
</tr>
<tr class="even">
<td><strong>doi</strong></td>
<td>Text</td>
<td><em>Optional</em>. The Digital Object Identifier for the dataset. (e.g.&nbsp;https://doi.org/10.15468/ykxm8x)</td>
<td>Default: Empty String</td>
</tr>
<tr class="odd">
<td><strong>citation</strong></td>
<td>Text</td>
<td><em>Optional</em>. The recommended citation for the dataset.</td>
<td>Default: Empty String</td>
</tr>
</tbody>
</table>
<!-- Section taxa_obs -->
</section>
</section>
<section id="table-taxa_obs" class="level2">
<h2 class="anchored" data-anchor-id="table-taxa_obs">Table: Taxa_Obs</h2>
<section id="description-2" class="level3">
<h3 class="anchored" data-anchor-id="description-2">Description</h3>
<p>The <code>taxa_obs</code> table is structured to record raw taxonomic information directly from source data. This table is essential for capturing a wide range of taxonomic details, including scientific names, authorship, and taxonomic rank. It is designed to accommodate taxa of any rank, such as species, genus, complexes, etc., without requiring corrections for grammatical accuracy or valid taxonomy. These aspects are managed by other resources within the database, like the <code>taxa_ref</code> table.</p>
</section>
<section id="dependencies-2" class="level3">
<h3 class="anchored" data-anchor-id="dependencies-2">Dependencies</h3>
<ul>
<li>Sequence: <code>taxa_obs_id_seq</code></li>
</ul>
</section>
<section id="columns-2" class="level3">
<h3 class="anchored" data-anchor-id="columns-2">Columns</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 17%">
<col style="width: 36%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Column Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
<th><strong>Constraints</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>id</strong></td>
<td>Integer</td>
<td>A unique identifier for each taxonomic observation.</td>
<td>Primary key, Not Null, Default: nextval(‘taxa_obs_id_seq’::regclass), Using Index Tablespace ssdpool</td>
</tr>
<tr class="even">
<td><strong>scientific_name</strong></td>
<td>Text</td>
<td><em>Optional</em>. The scientific name of the taxon observed. This includes taxa at any rank, such as species or genus.</td>
<td>Not Null, Part of Unique Constraint</td>
</tr>
<tr class="odd">
<td><strong>authorship</strong></td>
<td>Text</td>
<td><em>Optional</em>. The authorship of the scientific name. Defaults to an empty string if not provided.</td>
<td>Not Null, Default: ’’ (empty string), Part of Unique Constraint</td>
</tr>
<tr class="even">
<td><strong>rank</strong></td>
<td>Text</td>
<td><em>Optional</em>. The taxonomic rank of the observation. Defaults to an empty string if not provided.</td>
<td>Default: ’’ (empty string), Part of Unique Constraint</td>
</tr>
<tr class="odd">
<td><strong>parent_scientific_name</strong></td>
<td>Text</td>
<td><em>Optional</em>. The scientific name of the parent taxon. Used to resolve conflicts where a scientific name corresponds to different organisms in different branches of the tree of life. Optional; if not specified, all results for the given scientific name are returned.</td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>created_at</strong></td>
<td>Timestamp with time zone</td>
<td><em>Auto on insert/update</em>. The timestamp when the taxonomic observation was created.</td>
<td>Not Null, Default: CURRENT_TIMESTAMP</td>
</tr>
<tr class="odd">
<td><strong>modified_at</strong></td>
<td>Timestamp with time zone</td>
<td><em>Auto on insert/update</em>. The timestamp when the taxonomic observation was last modified.</td>
<td>Not Null, Default: CURRENT_TIMESTAMP</td>
</tr>
<tr class="even">
<td><strong>modified_by</strong></td>
<td>Text</td>
<td><em>Auto on insert/update</em>. The user who last modified the taxonomic observation record.</td>
<td>Not Null, Default: CURRENT_USER</td>
</tr>
</tbody>
</table>
</section>
<section id="additional-constraints-1" class="level3">
<h3 class="anchored" data-anchor-id="additional-constraints-1">Additional Constraints</h3>
<ul>
<li><strong>Unique Constraint</strong>: <code>taxa_obs_unique_rows</code> ensures that each combination of <code>scientific_name</code>, <code>authorship</code>, <code>rank</code>, <code>parent_scientific_name</code> is unique within the table.</li>
</ul>
</section>
<section id="indexes-1" class="level3">
<h3 class="anchored" data-anchor-id="indexes-1">Indexes</h3>
<ul>
<li><code>taxa_obs_scientific_name_idx</code> on <code>scientific_name</code></li>
</ul>
</section>
<section id="triggers-1" class="level3">
<h3 class="anchored" data-anchor-id="triggers-1">Triggers</h3>
<ul>
<li><code>update_modified_at</code>: Before update, updates the <code>modified_at</code> timestamp.</li>
</ul>
</section>
<section id="conflicts-and-parent-taxa" class="level3">
<h3 class="anchored" data-anchor-id="conflicts-and-parent-taxa">Conflicts and Parent Taxa</h3>
<p>The design of the <code>taxa_obs</code> table accounts for the potential conflicts in scientific naming. For instance, the same scientific name may correspond to different organisms in separate branches of the tree of life (e.g., <code>Salix</code> as a genus of willows in plants and a genus of tunicates in animals). To resolve such conflicts, the <code>parent_scientific_name</code> column allows users to specify a parent taxa name, thus restricting results to a specific branch. This feature is particularly useful for accurate data retrieval and association in cases of nomenclatural ambiguity.</p>
<!-- Section  -->
</section>
</section>
<section id="table-variables" class="level2">
<h2 class="anchored" data-anchor-id="table-variables">Table: Variables</h2>
<section id="description-3" class="level3">
<h3 class="anchored" data-anchor-id="description-3">Description</h3>
<p>The <code>variables</code> table in the database is crafted to support a diverse array of observation types and units. This versatility is key to accommodating various ecological data formats, such as counts of individuals, weight, density, occurrences, and presence/absence data, among others. Each of these observation types can be associated with different units of measurement. The table facilitates the recording and categorization of these different types and units, making it a pivotal component for data analysis and interpretation in ecological studies. The <code>id_variables</code> column, found in other related tables like <code>observations</code>, references the <code>variables</code> table to specify the type of observation, providing a clear link to the detailed description and unit of the variable being observed.</p>
</section>
<section id="dependencies-3" class="level3">
<h3 class="anchored" data-anchor-id="dependencies-3">Dependencies</h3>
<ul>
<li>Sequence: <code>variables_id_seq</code></li>
</ul>
</section>
<section id="columns-3" class="level3">
<h3 class="anchored" data-anchor-id="columns-3">Columns</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 13%">
<col style="width: 53%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Column Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
<th><strong>Constraints</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>id</strong></td>
<td>Integer</td>
<td>A unique identifier for each variable.</td>
<td>Primary key, Not Null, Default: nextval(‘variables_id_seq’::regclass)</td>
</tr>
<tr class="even">
<td><strong>name</strong></td>
<td>Character Varying</td>
<td>The name of the variable, indicating the type of observation (e.g., count, weight, density).</td>
<td>Not Null, Part of Unique Constraint</td>
</tr>
<tr class="odd">
<td><strong>unit</strong></td>
<td>Character Varying</td>
<td><em>Optional</em>. The unit of measurement for the variable, which may vary based on the observation type.</td>
<td>Not Null, Default: ’’, Part of Unique Constraint</td>
</tr>
<tr class="even">
<td><strong>description</strong></td>
<td>Text</td>
<td><em>Optional</em>. A detailed description of the variable, explaining its significance and use in observations.</td>
<td>-</td>
</tr>
</tbody>
</table>
</section>
<section id="additional-constraints-2" class="level3">
<h3 class="anchored" data-anchor-id="additional-constraints-2">Additional Constraints</h3>
<ul>
<li><strong>Unique Constraint</strong>: <code>variables_name_unit_key</code> ensures that each combination of <code>name</code> and <code>unit</code> is unique within the table.</li>
</ul>
<!-- Section efforts and lookup table -->
</section>
</section>
<section id="table-efforts" class="level2">
<h2 class="anchored" data-anchor-id="table-efforts">Table: Efforts</h2>
<section id="description-4" class="level3">
<h3 class="anchored" data-anchor-id="description-4">Description</h3>
<p>The <code>efforts</code> table is specifically designed to record the efforts associated with ecological observations. This table plays a crucial role in quantifying and categorizing the effort invested in obtaining various observations. The efforts could be in various forms like time spent, area covered, traps used, etc., and are quantified as numeric values. The link to the <code>variables</code> table through <code>id_variables</code> specifies the type of effort being recorded, ensuring a standardized and coherent approach to effort recording across different observation types.</p>
<section id="relationship-with-observations" class="level4">
<h4 class="anchored" data-anchor-id="relationship-with-observations">Relationship with Observations</h4>
<p>The efforts table is intricately linked to the observations table through the obs_efforts lookup table. This table acts as a relational bridge, establishing a connection between individual observations and the corresponding efforts involved in their acquisition. The obs_efforts table essentially serves as a many-to-many relationship facilitator, allowing each observation to be associated with one or more effort entries, and vice versa. See the <code>obs_efforts</code> table documentation for more details.</p>
</section>
</section>
<section id="dependencies-4" class="level3">
<h3 class="anchored" data-anchor-id="dependencies-4">Dependencies</h3>
<ul>
<li>Sequence: <code>efforts_id_seq</code></li>
<li>Foreign Key:
<ul>
<li><code>id_variables</code> references <code>public.variables (id)</code></li>
</ul></li>
</ul>
</section>
<section id="columns-4" class="level3">
<h3 class="anchored" data-anchor-id="columns-4">Columns</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 41%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Column Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
<th><strong>Constraints</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>id</strong></td>
<td>Integer</td>
<td>A unique identifier for each effort entry.</td>
<td>Primary key, Not Null, Default: nextval(‘efforts_id_seq’::regclass)</td>
</tr>
<tr class="even">
<td><strong>id_variables</strong></td>
<td>Integer</td>
<td>The identifier of the variable associated with the effort.</td>
<td>Not Null, Foreign key</td>
</tr>
<tr class="odd">
<td><strong>effort_value</strong></td>
<td>Numeric</td>
<td>The quantitative value representing the effort.</td>
<td>Not Null, Part of Unique Constraint</td>
</tr>
</tbody>
</table>
</section>
<section id="additional-constraints-3" class="level3">
<h3 class="anchored" data-anchor-id="additional-constraints-3">Additional Constraints</h3>
<ul>
<li><strong>Unique Constraint</strong>: <code>efforts_id_variables_effort_value_key</code> ensures that each combination of <code>id_variables</code> and <code>effort_value</code> is unique within the table, preventing redundancy in effort recording.</li>
</ul>
</section>
<section id="foreign-key-constraints" class="level3">
<h3 class="anchored" data-anchor-id="foreign-key-constraints">Foreign Key Constraints</h3>
<ul>
<li><code>efforts_id_variables_fkey</code>: Links to the <code>variables</code> table, ensuring that each effort is associated with a valid variable type, providing context and meaning to the effort value recorded.</li>
</ul>
</section>
</section>
<section id="table-obs_efforts" class="level2">
<h2 class="anchored" data-anchor-id="table-obs_efforts">Table: Obs_Efforts</h2>
<section id="description-5" class="level3">
<h3 class="anchored" data-anchor-id="description-5">Description</h3>
<p>The <code>obs_efforts</code> table serves as a linking mechanism between ecological observations and the efforts associated with them. It is a junction table designed to create a many-to-many relationship, capturing which efforts are related to specific observations. This design is essential for providing a comprehensive understanding of the resources and efforts expended in gathering each observation, such as the time, distance covered, or equipment used. By establishing a clear connection between observations and their corresponding efforts, this table enhances the granularity and context of ecological data analysis.</p>
</section>
<section id="dependencies-5" class="level3">
<h3 class="anchored" data-anchor-id="dependencies-5">Dependencies</h3>
<ul>
<li>Foreign Keys:
<ul>
<li><code>id_obs</code> references an observation table (to be specified).</li>
<li><code>id_efforts</code> references <code>public.efforts (id)</code></li>
</ul></li>
</ul>
</section>
<section id="columns-5" class="level3">
<h3 class="anchored" data-anchor-id="columns-5">Columns</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 6%">
<col style="width: 69%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Column Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
<th><strong>Constraints</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>id_obs</strong></td>
<td>Bigint</td>
<td>The identifier of the observation. Represents a link to a specific observation record.</td>
<td>Not Null, Part of Unique Constraint</td>
</tr>
<tr class="even">
<td><strong>id_efforts</strong></td>
<td>Integer</td>
<td>The identifier of the effort. Links to a specific effort record in the <code>efforts</code> table.</td>
<td>Not Null, Foreign key, Part of Unique Constraint</td>
</tr>
</tbody>
</table>
</section>
<section id="additional-constraints-4" class="level3">
<h3 class="anchored" data-anchor-id="additional-constraints-4">Additional Constraints</h3>
<ul>
<li><strong>Unique Constraint</strong>: <code>obs_efforts_id_obs_id_efforts_key</code> ensures that each combination of <code>id_obs</code> and <code>id_efforts</code> is unique within the table, preventing duplication in the linking of observations and efforts.</li>
</ul>
</section>
<section id="foreign-key-constraints-1" class="level3">
<h3 class="anchored" data-anchor-id="foreign-key-constraints-1">Foreign Key Constraints</h3>
<ul>
<li><code>obs_efforts_id_efforts_fkey</code>: Ensures the integrity of the link between the <code>obs_efforts</code> and <code>efforts</code> tables, confirming that every effort associated with an observation is valid and exists in the <code>efforts</code> table.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>